
-- Definición de la tabla Paises
CREATE TABLE Paises (
    idPais SERIAL PRIMARY KEY,
    nombre VARCHAR(45) NOT NULL
);

-- Definición de la tabla Personas
CREATE TABLE Personas (
    idPersona SERIAL PRIMARY KEY,
    cedula VARCHAR(100),
    nombre VARCHAR(100) NOT NULL,
    apellido VARCHAR(100),
    fechaNacimiento DATE,
    idPaisNacionalidad INTEGER,
    FOREIGN KEY (idPaisNacionalidad) REFERENCES Paises(idPais)
);

-- Definición de la tabla Generos
CREATE TABLE Generos (
    idGenero SERIAL PRIMARY KEY,
    nombre VARCHAR(45) NOT NULL,
    descripcion VARCHAR(200)
);

-- Definición de la tabla Editoriales
CREATE TABLE Editoriales (
    idEditorial SERIAL PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    descripcion VARCHAR(200)
);

-- Definición de la tabla Usuarios
CREATE TABLE Usuarios (
    idUsuario INTEGER PRIMARY KEY UNIQUE,
    numeroPrestamos INTEGER DEFAULT 0,
    password VARCHAR(256),
    FOREIGN KEY (idUsuario) REFERENCES Personas(idPersona)
);

-- Definición de la tabla Autor
CREATE TABLE Autores (
    idAutor INTEGER PRIMARY KEY UNIQUE,
    idGeneroPrincipal INTEGER,
    FOREIGN KEY (idAutor) REFERENCES Personas(idPersona),
    FOREIGN KEY (idGeneroPrincipal) REFERENCES Generos(idGenero)
);

-- Definición de la tabla Libros
CREATE TABLE Libros (
    idLibro SERIAL PRIMARY KEY,
    titulo VARCHAR(100),
    sinopsis VARCHAR(200),
    idGenero INTEGER,
    idAutor INTEGER,
    idEditorial INTEGER,
    FOREIGN KEY (idGenero) REFERENCES Generos(idGenero),
    FOREIGN KEY (idAutor) REFERENCES Autores(idAutor),
    FOREIGN KEY (idEditorial) REFERENCES Editoriales(idEditorial)
);

-- Definición de la tabla Prestamos
CREATE TABLE Prestamos (
    idPrestamo SERIAL PRIMARY KEY,
    vigente BOOLEAN,
    fechaPrestamo DATE,
    idUsuario INTEGER,
    idLibro INTEGER,
    FOREIGN KEY (idUsuario) REFERENCES Usuarios(idUsuario),
    FOREIGN KEY (idLibro) REFERENCES Libros(idLibro)
);
